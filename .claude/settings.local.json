{
  "permissions": {
    "allow": [
      "WebSearch",
      "WebFetch(domain:github.com)",
      "Bash(bun install)",
      "Bash(bun add:*)",
      "Bash(bunx vitest run:*)",
      "Bash(test-merge.ts << 'EOF'\nimport { mergeAdjacentRects, type Rect } from './src/utils/geometry.ts';\n\nconst rects: Rect[] = [\n  { x: 100, y: 280, width: 35, height: 12 },\n  { x: 135, y: 280, width: 42, height: 12 },\n];\n\nconsole.log\\('Input rects:', JSON.stringify\\(rects, null, 2\\)\\);\nconst merged = mergeAdjacentRects\\(rects, 2\\);\nconsole.log\\('Merged rects:', JSON.stringify\\(merged, null, 2\\)\\);\nconsole.log\\('Expected 1, got:', merged.length\\);\nEOF)",
      "Bash(test-highlight-debug.ts << 'EOF'\nimport { buildPageTextIndex } from './src/search/TextIndex.js';\nimport { computeHighlightRects } from './src/highlight/HighlightEngine.js';\nimport type { PdflightTextItem } from './src/types.js';\n\nfunction makeItem\\(str: string, overrides?: Partial<PdflightTextItem>\\): PdflightTextItem {\n  const charWidths = Array.from\\(str, \\(\\) => 7\\);\n  return {\n    str,\n    transform: [12, 0, 0, 12, 100, 500],\n    width: str.length * 7,\n    height: 12,\n    fontName: 'TestFont',\n    hasEOL: false,\n    charWidths,\n    ...overrides,\n  };\n}\n\nconst items = [\n  makeItem\\('Hello', { transform: [12, 0, 0, 12, 100, 500] }\\),\n  makeItem\\(' World', { transform: [12, 0, 0, 12, 135, 500] }\\)\n];\nconst index = buildPageTextIndex\\(1, items\\);\n\nconsole.log\\('Normalized text:', index.normalizedText\\);\nconsole.log\\('CharMap length:', index.charMap.length\\);\nconsole.log\\('Items count:', index.items.length\\);\n\nconst rects = computeHighlightRects\\(index, { page: 1, startChar: 0, endChar: 11, id: 'h1', color: 'yellow' }, 792, 1.0\\);\nconsole.log\\('Rects:', JSON.stringify\\(rects, null, 2\\)\\);\nconsole.log\\('Rect count:', rects.length\\);\nEOF)",
      "Bash(bunx playwright install:*)",
      "Bash(bunx playwright test:*)",
      "mcp__plugin_playwright_playwright__browser_navigate",
      "mcp__plugin_playwright_playwright__browser_select_option",
      "mcp__plugin_playwright_playwright__browser_type",
      "mcp__plugin_playwright_playwright__browser_click",
      "mcp__plugin_playwright_playwright__browser_take_screenshot",
      "mcp__plugin_playwright_playwright__browser_snapshot",
      "mcp__plugin_playwright_playwright__browser_evaluate",
      "mcp__plugin_playwright_playwright__browser_run_code",
      "Bash(cd /Users/sethosher/projects/opensource/pdflight-e2e-testing && npx playwright test tests/e2e/highlight-precision.spec.ts 2>&1 | tail -40)",
      "Bash(cd /Users/sethosher/projects/opensource/pdflight-e2e-testing && npx playwright test tests/e2e/highlight-precision.spec.ts --grep \"Accello\" 2>&1 | tail -30)",
      "Bash(cd /Users/sethosher/projects/opensource/pdflight-e2e-testing && node -e \"\nconst pdfjsLib = require\\('pdfjs-dist/legacy/build/pdf.mjs'\\);\n// Disable worker for simple Node usage\npdfjsLib.GlobalWorkerOptions.workerSrc = '';\n\nasync function main\\(\\) {\n  const doc = await pdfjsLib.getDocument\\('tests/fixtures/pdf-sample2.pdf'\\).promise;\n  const page = await doc.getPage\\(1\\);\n  const text = await page.getTextContent\\(\\);\n  const fullText = text.items.map\\(i => i.str\\).join\\(''\\);\n  console.log\\('Page 1 text \\(first 2000 chars\\):'\\);\n  console.log\\(fullText.slice\\(0, 2000\\)\\);\n}\nmain\\(\\).catch\\(e => console.error\\(e\\)\\);\n\" 2>&1 | head -40)",
      "mcp__plugin_playwright_playwright__browser_close",
      "Bash(cd /Users/sethosher/projects/opensource/pdflight-e2e-testing && npx playwright test tests/e2e/highlight-precision.spec.ts 2>&1 | tail -30)",
      "Bash(cd /Users/sethosher/projects/opensource/pdflight-e2e-testing && npx playwright test tests/e2e/highlight-precision.spec.ts 2>&1 | tail -15)"
    ]
  }
}
