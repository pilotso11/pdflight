{
  "permissions": {
    "allow": [
      "WebSearch",
      "WebFetch(domain:github.com)",
      "Bash(bun install)",
      "Bash(bun add:*)",
      "Bash(bunx vitest run:*)",
      "Bash(test-merge.ts << 'EOF'\nimport { mergeAdjacentRects, type Rect } from './src/utils/geometry.ts';\n\nconst rects: Rect[] = [\n  { x: 100, y: 280, width: 35, height: 12 },\n  { x: 135, y: 280, width: 42, height: 12 },\n];\n\nconsole.log\\('Input rects:', JSON.stringify\\(rects, null, 2\\)\\);\nconst merged = mergeAdjacentRects\\(rects, 2\\);\nconsole.log\\('Merged rects:', JSON.stringify\\(merged, null, 2\\)\\);\nconsole.log\\('Expected 1, got:', merged.length\\);\nEOF)",
      "Bash(test-highlight-debug.ts << 'EOF'\nimport { buildPageTextIndex } from './src/search/TextIndex.js';\nimport { computeHighlightRects } from './src/highlight/HighlightEngine.js';\nimport type { PdflightTextItem } from './src/types.js';\n\nfunction makeItem\\(str: string, overrides?: Partial<PdflightTextItem>\\): PdflightTextItem {\n  const charWidths = Array.from\\(str, \\(\\) => 7\\);\n  return {\n    str,\n    transform: [12, 0, 0, 12, 100, 500],\n    width: str.length * 7,\n    height: 12,\n    fontName: 'TestFont',\n    hasEOL: false,\n    charWidths,\n    ...overrides,\n  };\n}\n\nconst items = [\n  makeItem\\('Hello', { transform: [12, 0, 0, 12, 100, 500] }\\),\n  makeItem\\(' World', { transform: [12, 0, 0, 12, 135, 500] }\\)\n];\nconst index = buildPageTextIndex\\(1, items\\);\n\nconsole.log\\('Normalized text:', index.normalizedText\\);\nconsole.log\\('CharMap length:', index.charMap.length\\);\nconsole.log\\('Items count:', index.items.length\\);\n\nconst rects = computeHighlightRects\\(index, { page: 1, startChar: 0, endChar: 11, id: 'h1', color: 'yellow' }, 792, 1.0\\);\nconsole.log\\('Rects:', JSON.stringify\\(rects, null, 2\\)\\);\nconsole.log\\('Rect count:', rects.length\\);\nEOF)",
      "Bash(bunx playwright install:*)",
      "Bash(bunx playwright test:*)",
      "Bash(mkdir -p demo/tests && ln -sf ../../tests/fixtures demo/tests/fixtures)",
      "Bash(rm demo/tests/fixtures && cp -r tests/fixtures demo/tests/fixtures)",
      "Bash(which npm && npm --version)",
      "Bash(pkill -f vite; sleep 2; npm run dev)",
      "Bash(npx playwright test tests/e2e/simple.spec.ts 2>&1 | grep -E \"\\(CONSTRUCTOR|worker configured|Debug div|Canvas\\)\" | head -10)",
      "Bash(npx playwright test tests/e2e/simple.spec.ts --reporter=list)"
    ]
  }
}
